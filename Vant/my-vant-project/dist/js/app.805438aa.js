(function(){"use strict";var t={3153:function(t,e,a){t.exports=a.p+"img/logo.dbd40807.png"},3863:function(t,e,a){var s=a(6848),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],r={},o=r,l=a(1656),c=(0,l.A)(o,i,n,!1,null,"4d7cfae9",null),u=c.exports,d=a(6178),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Login-Page"},[e("van-nav-bar",{attrs:{title:"用户登录"}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"},{pattern:/^\w{5,}$/,message:"用户名至少包含5个字符"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"},{pattern:/^\w{5,}$/,message:"用户名至少包含5个字符"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1),e("router-link",{staticClass:"link",attrs:{to:"/register"}},[t._v("注册账号")])],1)},v=[],h=(a(4114),a(9295),a(4906)),g=a(4373);const m="vant-mobile-exp-token",f=()=>localStorage.getItem(m),b=t=>{localStorage.setItem(m,t)},y=()=>{localStorage.removeItem(m)},_=g.A.create({baseURL:"http://interview-api-t.itheima.net/h5/",timeout:5e3});_.interceptors.request.use((function(t){const e=f();return e&&(console.log(t),t.headers.Authorization=`Bearer ${e}`),t}),(function(t){return Promise.reject(t)})),_.interceptors.response.use((function(t){return t.data}),(function(t){return t.response&&(401===t.response.status?(y(),Ot.push("/login")):(0,h.A)(t.response.data.message)),Promise.reject(t)}));var k=_;const w=t=>k.post("/user/register",t),A=t=>k.post("/user/login",t),x=()=>k("/user/currentUser");var C={name:"LoginPage",data(){return{username:"",password:""}},methods:{async onSubmit(t){const{data:e}=await A(t);this.$toast.success("登录成功"),b(e.token),this.$router.push("/")}}},S=C,$=(0,l.A)(S,p,v,!1,null,"6bcce76f",null),T=$.exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"register-page"},[e("van-nav-bar",{attrs:{title:"用户注册"}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"},{pattern:/^\w{5,}$/,message:"用户名至少包含5个字符"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"},{pattern:/^\w{6,}$/,message:"密码至少包含6个字符"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"info","native-type":"submit"}},[t._v("注册")])],1)],1),e("router-link",{staticClass:"link",attrs:{to:"/login"}},[t._v("有账号，去登录")])],1)},L=[],O={name:"Register-Page",data(){return{username:"",password:""}},methods:{async onSubmit(t){this.$toast.loading({message:"请求中...",forbidClick:!0}),await w(t),this.$toast.success("注册成功"),this.$router.push("/login")}}},P=O,F=(0,l.A)(P,j,L,!1,null,"29196e4e",null),I=F.exports,q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-page"},[e("van-nav-bar",{attrs:{"left-text":"返回",fixed:"",title:"面经详情"},on:{"click-left":function(e){return t.$router.back()}}}),e("header",{staticClass:"header"},[e("h1",[t._v(t._s(t.article.stem))]),e("p",[t._v(" "+t._s(t.article.createdAt)+" | "+t._s(t.article.views)+" 浏览量 | "+t._s(t.article.likeCount)+" 点赞数 ")]),e("p",[e("img",{attrs:{src:t.article.avatar,alt:""}}),e("span",[t._v(t._s(t.article.creator))])])]),e("main",{staticClass:"body",domProps:{innerHTML:t._s(t.article.content)}}),e("div",{staticClass:"opt"},[e("van-icon",{class:{active:t.article.likeFlag},attrs:{name:"like-o"},on:{click:t.toggleLike}}),e("van-icon",{class:{active:t.article.collectFlag},attrs:{name:"star-o"},on:{click:t.toggleCollect}})],1)],1)},M=[];const z=t=>(console.log(t),k.get("/interview/query",{params:{current:t.current,sorter:t.sorter,pageSize:10}})),H=t=>k.get("interview/show",{params:{id:t}}),E=t=>k.post("interview/opt",{id:t,optType:1}),R=t=>k.post("interview/opt",{id:t,optType:2}),U=t=>k.get("/interview/opt/list",{params:{page:t.page,pageSize:5,optType:2}}),B=t=>k.get("interview/opt/list",{params:{page:t.page,pageSize:5,optType:1}});var D={name:"detail-page",data(){return{article:{}}},async created(){this.article={};const t=await H(this.$route.params.id);this.article=t.data},methods:{async toggleLike(){await E(this.article.id),this.article.likeFlag=!this.article.likeFlag,this.article.likeFlag?(this.article.likeCount++,this.$toast.success("点赞成功")):(this.article.likeCount--,this.$toast.success("取消点赞"))},async toggleCollect(){await R(this.article.id),this.article.collectFlag=!this.article.collectFlag,this.article.collectFlag?this.$toast.success("收藏成功"):this.$toast.success("取消收藏")}}},G=D,J=(0,l.A)(G,q,M,!1,null,"62cb8ab0",null),K=J.exports,N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout-page"},[e("router-view"),e("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-tabbar-item",{attrs:{to:"/article",icon:"notes-o"}},[t._v("面经")]),e("van-tabbar-item",{attrs:{to:"/collect",icon:"star-o"}},[t._v("收藏")]),e("van-tabbar-item",{attrs:{to:"/like",icon:"like-o"}},[t._v("喜欢")]),e("van-tabbar-item",{attrs:{to:"/user",icon:"user-o"}},[t._v("我的")])],1)],1)},Q=[],V={data(){return{active:""}}},W=V,X=(0,l.A)(W,N,Q,!1,null,"0033ad99",null),Y=X.exports,Z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-page"},[e("nav",{staticClass:"my-nav van-hairline--bottom"},[e("a",{class:{active:"weight_desc"===t.sorter},attrs:{href:"javascript:;"},on:{click:function(e){return t.changeSorter("weight_desc")}}},[t._v("推荐")]),e("a",{class:{active:null===t.sorter},attrs:{href:"javascript:;"},on:{click:function(e){return t.changeSorter(null)}}},[t._v("最新")]),t._m(0)]),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return e("ArticleItem",{key:t.id,attrs:{item:t}})})),1)],1)},tt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:a(3153),alt:""}})])}],et=function(){var t=this,e=t._self._c;return e("van-cell",{staticClass:"article-item",on:{click:function(e){return t.$router.push(`/article/${t.item.id}`)}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"head"},[e("img",{attrs:{src:t.item.avatar,alt:""}}),e("div",{staticClass:"con"},[e("p",{staticClass:"title van-ellipsis"},[t._v(t._s(t.item.stem))]),e("p",{staticClass:"other"},[t._v(t._s(t.item.creator)+" | "+t._s(t.item.createdAt))])])])]},proxy:!0},{key:"label",fn:function(){return[e("div",{staticClass:"body van-multi-ellipsis--l2"},[t._v(" "+t._s(t.clearHTMLTag(t.item.content))+" ")]),e("div",{staticClass:"foot"},[t._v("点赞 "+t._s(t.item.likeCount)+" | 浏览 "+t._s(t.item.views))])]},proxy:!0}])})},at=[],st={name:"ArticleItem",props:{item:{type:Object,default:()=>{}}},methods:{clearHTMLTag(t){return t.replace(/<[^>]+>/g,"")}}},it=st,nt=(0,l.A)(it,et,at,!1,null,"39eb9547",null),rt=nt.exports,ot={components:{ArticleItem:rt},name:"artcle-page",data(){return{list:[],current:1,sorter:"weight_desc",loading:!1,finished:!1}},async created(){},methods:{async onLoad(){const t=await z({current:this.current,sorter:this.sorter});this.list.push(...t.data.rows),this.loading=!1,this.current++,this.current>t.data.pageTotal&&(this.finished=!0)},changeSorter(t){this.sorter=t,this.current=1,this.list=[],this.finished=!1,this.loading=!0,this.onLoad()}}},lt=ot,ct=(0,l.A)(lt,Z,tt,!1,null,"d973074e",null),ut=ct.exports,dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"collect-page"},[e("van-nav-bar",{attrs:{fixed:"",title:"我的收藏"}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,a){return e("ArticleItem",{key:a,attrs:{item:t}})})),1)],1)},pt=[],vt={name:"collect-page",data(){return{list:[],loading:!1,finished:!1,page:1}},methods:{async onLoad(){const t=await U({page:this.page});this.list.push(...t.data.rows),this.loading=!1,this.page++,console.log(this.page),this.page>t.data.pageTotal&&(this.finished=!0)}}},ht=vt,gt=(0,l.A)(ht,dt,pt,!1,null,"5736a80e",null),mt=gt.exports,ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-page"},[e("div",{staticClass:"user"},[e("img",{attrs:{src:t.avatar,alt:""}}),e("h3",[t._v(t._s(t.username))])]),e("van-grid",{attrs:{clickable:"","column-num":3,border:!1}},[e("van-grid-item",{attrs:{icon:"clock-o",text:"历史记录",to:"/"}}),e("van-grid-item",{attrs:{icon:"bookmark-o",text:"我的收藏",to:"/collect"}}),e("van-grid-item",{attrs:{icon:"thumb-circle-o",text:"我的点赞",to:"/like"}})],1),e("van-cell-group",{staticClass:"mt20"},[e("van-cell",{attrs:{title:"推荐分享","is-link":""}}),e("van-cell",{attrs:{title:"意见反馈","is-link":""}}),e("van-cell",{attrs:{title:"关于我们","is-link":""}}),e("van-cell",{attrs:{title:"退出登录","is-link":""},on:{click:t.logout}})],1)],1)},bt=[],yt={name:"user-page",data(){return{username:"",avatar:""}},async created(){const t=await x();this.username=t.data.username,this.avatar=t.data.avatar},methods:{logout(){y(),this.$router.push("/login")}}},_t=yt,kt=(0,l.A)(_t,ft,bt,!1,null,"356722ae",null),wt=kt.exports,At=function(){var t=this,e=t._self._c;return e("div",{staticClass:"like-page"},[e("van-nav-bar",{attrs:{fixed:"",title:"我的点赞"}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,a){return e("ArticleItem",{key:a,attrs:{item:t}})})),1)],1)},xt=[],Ct={name:"like-page",data(){return{list:[],loading:!1,finished:!1,page:1}},methods:{async onLoad(){const t=await B({page:this.page});this.list.push(...t.data.rows),this.loading=!1,this.page++,this.page>t.data.pageTotal&&(this.finished=!0)}}},St=Ct,$t=(0,l.A)(St,At,xt,!1,null,"7454bb02",null),Tt=$t.exports;s.Ay.use(d.Ay);const jt=new d.Ay({routes:[{path:"/login",component:T},{path:"/register",component:I},{path:"/article/:id",component:K},{path:"/",component:Y,redirect:"/article",children:[{path:"article",component:ut},{path:"like",component:Tt},{path:"collect",component:mt},{path:"user",component:wt}]}]}),Lt=["/login","/register"];jt.beforeEach(((t,e,a)=>{const s=f();s||Lt.includes(t.path)?a():a("/login")}));var Ot=jt,Pt=(a(1084),a(2665)),Ft=(a(1654),a(1431)),It=(a(402),a(8)),qt=(a(3244),a(2171)),Mt=(a(1838),a(4629)),zt=(a(777),a(1864)),Ht=(a(1936),a(6141)),Et=(a(3154),a(1755)),Rt=(a(5139),a(6874)),Ut=(a(5634),a(7555)),Bt=(a(7872),a(1946)),Dt=(a(1552),a(9471));s.Ay.use(Dt.A),s.Ay.use(Bt.A),s.Ay.use(Ut.A),s.Ay.use(Rt.A),s.Ay.use(Et.A),s.Ay.use(Ht.A),s.Ay.use(zt.A),s.Ay.use(Mt.A),s.Ay.use(qt.A),s.Ay.use(h.A),s.Ay.use(It.A),s.Ay.use(Ft.A),s.Ay.use(Pt.A),s.Ay.component("ArticleItem",rt),s.Ay.config.productionTip=!1,new s.Ay({render:t=>t(u),router:Ot}).$mount("#app")}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,n){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],n=t[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[s,i,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,r=s[0],o=s[1],l=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var u=l(a)}for(e&&e(s);c<r.length;c++)n=r[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},s=self["webpackChunkmy_vant_project"]=self["webpackChunkmy_vant_project"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(3863)}));s=a.O(s)})();
//# sourceMappingURL=app.805438aa.js.map